---
layout: default
title: OMERO.figure
---

    <!-- MAIN CONTENT -->

        <h2 style="margin:0px">
          <a href="http://www.lifesci.dundee.ac.uk/news/2015/mar/4/winner-cls-innovator-year-award-2015-open-microscopy-environment-will-moore-petr">
          Winner of CLS Innovator of the Year Award
          <div style="text-align:right; font-size:50%">Read more...</div>
          </a>
        </h2>
        <h2>Current Version: <strong>4.3.0</strong>
        <div style="text-align:left; font-size:60%">See <a href="https://github.com/ome/omero-figure/blob/master/CHANGELOG.md">Release Notes</a></div>
        </h2>  
        <h1 style="margin-top:0px">Fast figures from your OMERO images</h1>

        <iframe width="640" height="360" src="//www.youtube.com/embed/mjlNBUoGKRc?rel=0" frameborder="0" allowfullscreen></iframe>

        <h1 style="margin-top: 10px">Smart figures with metadata</h1>
        <p>OMERO is a server platform for managing biological images. See the
          <a href="http://www.openmicroscopy.org/site">Open Microscopy Site</a> for more info.
          OMERO.figure combines OMERO's powerful image rendering and metadata to provide a
          tool for rapid figure creation. Each panel of the figure becomes a multi-dimensional
          image viewer, allowing you to zoom and pan, adjust rendering settings and even
          scroll through Z and Time.
          Figures can be exported as TIFF images or PDF documents, so you can move seamlessly to
          other editing tools such as Adobe Illustrator.
        </p>

        <h1>Shortcuts for common tasks</h1>
        <iframe width="640" height="360" src="//www.youtube.com/embed/be8RbKi7VJY?rel=0" frameborder="0" allowfullscreen></iframe>
        <p>Many tasks of figure creation are very time consuming when done manually.
          OMERO.figure provides tools to get the job done quickly. All of these features
          work with multiple selected panels at once, making it easy to keep similar
          panels in sync.
          <ul>
            <li><strong>Align to grid</strong>: Snap panels to perfectly-spaced rows and columns.</li>
            <li><strong>Adjust rendering settings</strong>: Toggle channels, change colours and adjust levels.</li>
            <li><strong>Clever labels</strong>: Labels are bound to the chosen spot on each panel and can
              be auto-generated from image metadata.</li>
            <li><strong>Copy and paste</strong>: Duplicate rows or columns instantly, aligned perfectly.</li>
            <li><strong>Scroll Z and Time</strong>: Move image panels through Z and Time dimensions.</li>
            <li><strong>Zoom, Pan and Rotate</strong>: Crop your images simply by zooming, panning and rotating the viewport without ever losing the full image.</li>
            <li><strong>Crop to ROI</strong>: Use Regions of Interest from the OMERO server to crop images.</li>
            <li><strong>Accurate scalebars</strong>: Use the pixel size metadata from OMERO to add 'live'
              scalebars that update as you zoom.</li>
            <li><strong>Full undo and redo</strong>: For extra convenience.</li>
            <li><strong>Set 'dpi'</strong>: You can control the resolution of images embedded in exported PDF pages.</li>
            <li><strong>Multi-page figures</strong>: Create, edit and view several figure pages within one OMERO.figure file at once.</li>
            <li><strong>Export TIFF or PNG</strong>: Export as multi-page PNGs or TIFF images (at 300 dpi) suitable for journal submission or further editing.</li>
            <li><strong>Export with panel images</strong>: Optionally export all panels as separate TIFFs to validate figure building steps or for use elsewhere.</li>
          </ul>
        </p>

        <iframe width="640" height="360" src="//www.youtube.com/embed/qzSPFGlRHNQ?rel=0" frameborder="0" allowfullscreen></iframe>

        <h1>Power of the web</h1>
        <p>
          You can create beautiful figures in your browser, then share them with others.
          Depending on your OMERO permissions settings, you can even make them public,
          so everyone can explore your figures interactively.
        </p>

        <a id="demo"></a>
        <h1>Try it now!</h1>
        <p>We have created a live demo with several examples, based on figures published in the Journal of Cell Biology.
          This is a 'static' demo app (not hosted on an OMERO server), so you can't save changes. All the image data
          comes from the <a href="http://jcb-dataviewer.rupress.org/">OMERO-powered JCB-DataViewer</a>, where you can also browse the raw data.<br>
          Click figures for demos:
        </p>

        <table class="demo-table">
          <tr>
            <td>
              <a href="demo/#file/1"/>
                <img src="images/demo1.png"><br>
                Figure 5: MCAK phosphorylation
              </a>
              <br>
              from <a href="http://jcb.rupress.org/content/179/2/187">Porter et al, JCB 2007</a>.<br>
              See <a href="http://jcb-dataviewer.rupress.org/jcb/browse/105/134/">original data</a>.
            </td>
            <td>
              <a href="demo/#file/2"/>
                <img src="images/demo2.png"><br>
                Figure 1: KLP10A and Patronin
              </a>
              <br>
              from <a href="http://jcb.rupress.org/content/203/1/35">Wang et al, JCB 2013</a>.<br>
              See <a href="http://jcb-dataviewer.rupress.org/jcb/browse/7102/22507/">original data</a>.
            </td>
          </tr>
          <tr>
            <td>
              <a href="demo/#file/3"/>
                <img src="images/demo3.png"><br>
                Figure 2: Patronin microtubules
              </a>
              <br>
              from <a href="http://jcb.rupress.org/content/203/1/35">Wang et al, JCB 2013</a>.<br>
              See <a href="http://jcb-dataviewer.rupress.org/jcb/browse/7102/22522/">original data</a>.
            </td>
            <td>
              <a href="demo/#file/4"/>
                <img src="images/demo4.png"><br>
                Figure 10: PIP3 and F-actin chemotaxis
              </a>
              <br>
              from <a href="http://jcb.rupress.org/content/204/6/1027">Zatulovskiy et al, JCB 2014</a>.<br>
              See <a href="http://jcb-dataviewer.rupress.org/jcb/browse/8106/24483/">original data</a>.
            </td>
          </tr>
        </table>

        <a id="install"></a>
        <h1>Installing from PyPI</h1>
        <p>
          OMERO.figure version 4.3.0 requires OMERO.web <strong>5.6.0 or newer</strong>.
          We assume that OMERO.web is already installed.
          <ul>
            <li>Install the app using <a href="https://pip.pypa.io/en/stable/">pip</a>:<br>
              <code style="width:650px">
                $ pip install omero-figure
              </code>
            </li>
            <li>Add the app to OMERO.web:
              <code> $ omero config append omero.web.apps '"omero_figure"' # NB: double quotes</code>
            </li>
            <li>Display a link to 'Figure' at the top of the webclient:<br>
              <!-- with 'target' set to open the link in a new tab: -->
              <code style="width:650px">
                $ omero config append omero.web.ui.top_links '["Figure", "figure_index", {"title": "Open Figure in new tab", "target": "_blank"}]'
              </code>
            </li>
            <li>Add 'Figure' to the 'Open with' options, available from context menu on the webclient tree:<br>
              <!-- with 'target' set to open the link in a new tab: -->
              <code style="width:650px">
                $ omero config append omero.web.open_with '["omero_figure", "new_figure",
                {"supported_objects":["images"], "target": "_blank", "label": "OMERO.figure"}]'
              </code>
            </li>
            <li>Now restart OMERO.web as normal.
            </li>
          </ul>
          <strong>Warning:</strong>
          OMERO.figure version 2.x requires OMERO.web <strong>5.2.6 or newer</strong>. This is due to a Django Framework compatibility and to a required package reorganization in OMERO.figure in version 2.0 so the application can be distributed from Python Package Index <a href="https://pypi.python.org/pypi">PyPI</a>.
          
          <h4>Enabling figure export</h4>
          <p>
          This section assumes that an OMERO.server is already installed.

          Figures can be exported as PDF or TIFF files using a script that runs on the OMERO.server. This script needs to be uploaded to the OMERO.server and its dependencies installed in the OMERO.server machine virtual environment.

          The script can be uploaded using two alternative workflows, both of which require you to have the correct admin privileges.
          To find where OMERO.figure has been installed using pip, run:
          <code style="width:650px">
            $ pip show omero-figure
          </code>
        </p>
        <p>
          <ul>
            <li>
              Option 1: Connect to the OMERO server and upload script via the CLI. It is important to be in the correct directory when uploading so that the script is uploaded with the full path <strong>omero/figure_scripts/Figure_To_Pdf.py</strong>:<br>
              <code style="width:650px">
                $ cd omero_figure/scripts <br>
                $ omero script upload omero/figure_scripts/Figure_To_Pdf.py --official
              </code>
            </li>
            <li>
              <i>Option 2</i>: Alternatively, before starting the OMERO.server, copy the script from the figure install <strong>/omero_figure/scripts/omero/figure_scripts/Figure_To_Pdf.py</strong> to the OMERO.server <strong>path/to/OMERO.server/lib/scripts/omero/figure_scripts</strong>. Then restart the OMERO.server.
          </li> 
          </ul>
          Now install the script's dependencies:
          <ul>
            <li>Install <a href="https://bitbucket.org/rptlab/reportlab">reportlab</a> PDF python package. This needs to be installed in the virtual environment where the server is run:<br>
              <code style="width:650px">
                $ pip install reportlab
              </code>
            </li>
            <li>Optional: Figure legends can be formatted using Markdown syntax. To see this correctly in the exported PDF info page, we need <a href="https://pythonhosted.org/Markdown/index.html">Python-markdown</a>:<br>
              <code style="width:650px">
                $ pip install markdown
              </code>
            </li>
          </ul>
        </p>
        <h1>Update instructions</h1>
        <h3>Upgrade the app</h3>
        <p>
          Stop OMERO.web.
          To upgrade from a version of OMERO.figure prior to <strong>2.0.1</strong>:
          <ul>
            <li>
              Remove the 'figure' directory from <strong>within</strong> the directory that is on your PYTHONPATH.
            </li>
            <li>Install the app using <a href="https://pip.pypa.io/en/stable/">pip</a>:<br>
              <code style="width:650px">
                $ pip install -U omero-figure
              </code>
            </li>
            <li>Remove the old 'figure' app and add back the re-named 'omero_figure' app:<br>
                <code style="width:700px">
                  $ omero config remove omero.web.apps '"figure"'<br>
                  # Register the app<br>
                  $ omero config append omero.web.apps '"omero_figure"'<br>
                </code>
            </li>
            <li>If upgrading from OMERO.figure 1.0.0, you can update the
              webclient link to figure,
              so that it automatically opens the figure app in a new tab. Simply remove the old link and add back the
              new one...<br>
                <code style="width:700px">
                  # In case you need to list current links...<br>
                  $ omero config get omero.web.ui.top_links<br>
                  # Remove the figure link...<br>
                  $ omero config remove omero.web.ui.top_links '["Figure", "figure_index"]'<br>
                  # Add back new link as described in the install instructions above
                </code>
            </li>
            <li>Restart OMERO.web as normal.
            </li>
          </ul>
          </p>
          <p>
          To upgrade from version <strong>2.0.1</strong> or newer:
          <ul>
            <li>Run the following command:<br>
              <code style="width:700px">
              $ pip install omero-figure --upgrade
              </code>
            </li>
            <li>Restart OMERO.web as normal.
            </li>
          </ul>
        </p>
        <h3>Upgrade the figure export script</h3>
        <p>
        <ul>
          <li>
            You need to update the Figure export script using one of the 2 options described above. If using Option 1, you need to replace the existing script:<br>
              <code style="width:650px">
                $ cd omero_figure/scripts <br>
                # List scripts to get the ID of omero/figure_scripts/Figure_To_Pdf.py<br>
                $ omero script list<br>
                $ omero script replace &ltscriptId&gt omero/figure_scripts/Figure_To_Pdf.py
              </code>
          </li> 
          <li>If upgrading from OMERO.figure 1.0.0, you may want to install <a href="https://pythonhosted.org/Markdown/index.html">Python-markdown</a><br>
              <code style="width:650px">
                $ pip install markdown
              </code>
          </li>
        </ul>
      </p>
    </p>
